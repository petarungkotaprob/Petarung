import{inflateRaw as D}from"zlib";import{promisify as R}from"util";var d=R(D),v=new TextDecoder,l=a=>{throw new Error("but-unzip~"+a)},p=a=>v.decode(a),E=(...a)=>[...u(...a)];function*u(a,w=d){let t=a.length-20,b=Math.max(t-65516,2);for(;(t=a.lastIndexOf(80,t-1))!==-1&&!(a[t+1]===75&&a[t+2]===5&&a[t+3]===6)&&t>b;);t===-1&&l(2);let i=(r,f)=>a.subarray(t+=r,t+=f),s=new DataView(a.buffer,a.byteOffset),e=r=>s.getUint16(r+t,!0),n=r=>s.getUint32(r+t,!0),m=e(10);for(m!==e(8)&&l(3),t=n(16);m--;){let r=e(10),f=e(30),c=e(32),x=n(20),y=n(42),g=p(i(46,e(28))),h=p(i(f,c)),z=t,o;t=y,o=i(30+e(26)+e(28),x),yield{filename:g,comment:h,read:()=>r&8?w(o):r?l(1):o},t=z}}export{d as inflateRaw,u as iter,E as unzip};
